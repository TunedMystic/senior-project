<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge"/>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">


  <title>Laser Warfare</title>
  <link rel="stylesheet" href="../assets/less/laser-warfare/base.css"/>
  <script src="../assets/lib/angular/angular.min.js"></script>
  <script src="../assets/js/controllers.js"></script>
  <script src="../assets/js/app.js"></script>

</head>
<body ng-app="lasertag" ng-controller="homeCtrl">


  <img src="assets/img/loading.png" class="loading" ng-hide="ready">
  <div id="loadingText" ng-hide="ready">Loading</div>

  <div style="text-align:center" ng-show="ready">
    <img src="assets/img/logo.png">

    <!-- <div id="menu">
      <img src="assets/img/settings.png" ng-click="show = 'review'" ng-class="{spinner:show=='review'}">
    </div> -->

    <div ng-show="show == 'review'" style="margin-top:2%">
    	<header ng-show="reviewGame == null">Review a Game</header>
    	<div class="review-list" ng-show="reviewGame == null" ng-repeat="game in games|orderBy:'-time_played'|limitTo:10" ng-click="review(game)">
        Time Played: {$ game.time_played|date:'MM/dd/yyyy @ h:mma'  $}, Mode: {$ modeDisplayByVal(game.mode)  $}
      </div>
      <div id="review-data" ng-show="reviewGame != null">

        <div ng-show="reviewGame.mode == 'TEAMS'" ng-repeat="team in reviewGame.teams">
          <table class="new-game-table">
            <thead>
              <div class="teams-header">Name : {$ team.name $} --- Score : {$ team.score $}</div>
              <tr>
                <th>Place</th>
                <th>Username</th>
                <th>Score</th>
                <th>Shots Fired</th>
              </tr>
            </thead>
            <tbody>
              <tr class="review-list" ng-repeat="player in reviewGame.players|filter:{team:team.name}">
                <td>{$ $index + 1 $}</td>
                <td>{$ player.username $}</td>
                <td>{$ player.score $}</td>
                <td>{$ player.num_shots $}</td>
              </tr>
            </tbody>
          </table>
        </div>

        <div ng-hide="reviewGame.mode == 'TEAMS'">
          <h2>Mode: {$ modeDisplayByVal(reviewGame.mode) $} ---  State: {$ reviewGame.state $}</h2>
            <table class="new-game-table">
              <thead>
                <tr>
                  <th>Place</th>
                  <th>Username</th>
                  <th>Score</th>
                  <th>Shots Fired</th>
                </tr>
              </thead>
              <tbody>
                <tr class="review-list" ng-repeat="player in reviewGame.players" ng-click="stats(player)">
                  <td>{$ $index + 1 $}</td>
                  <td>{$ player.username  $}</td>
                  <td>{$ player.score  $}</td>
                  <td>{$ player.num_shots  $}</td>
                </tr>
              </tbody>
            </table>
        </div>
        <div class="sp-button" ng-click="reviewGame = null">Back</div>

      </div>
	  </div>

    <div ng-show="show == 'stats'">
      <h2>Games played by {$ playerStats.username $}</h2>
      <table class="new-game-table">
        <thead>
          <tr>
            <th>Rank</th>
            <th>Time Played</th>
            <th>Score</th>
            <th>Shots Fired</th>
            <th>Gun Used</th>
            <th>Team</th>
          </tr>
        </thead>
        <tbody>
          <tr class="review-list" ng-repeat="instance in playerStats.instances">
            <td>{$ instance.rank $}</td>
            <td>{$ instance.time|date:'MM/dd/yyyy @ h:mma' $}</td>
            <td>{$ instance.score $}</td>
            <td>{$ instance.num_shots  $}</td>
            <td>{$ instance.gun  $}</td>
            <td>{$ instance.team || 'None'  $}</td>
          </tr>
        </tbody>
      </table>
      <div class="sp-button" ng-click="show = 'review'">Back</div>
    </div>

  </div>

  <div id="Stage" class="EDGE-2633143"></div>

  </body>
</html>